{"remainingRequest":"H:\\Projects\\filemanageronline\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\Projects\\filemanageronline\\src\\components\\FileManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\Projects\\filemanageronline\\src\\components\\FileManager.vue","mtime":1561369427718},{"path":"H:\\Projects\\filemanageronline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\Projects\\filemanageronline\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\Projects\\filemanageronline\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"H:\\Projects\\filemanageronline\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\Projects\\filemanageronline\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TextView from \"@/components/TextView\";\nimport ImageView from \"@/components/ImageView\";\n\nexport default {\n  data: () => ({\n    dialog: false,\n    search: \"\",\n    progress: false,\n    deleting: false,\n    selectedItem: '',\n    headers: [\n      { text: \"Имя файла\", value: \"Names\" },\n      { text: \"Размер\", value: \"Size\" },\n      { text: \"Дата модификации\", value: \"ModificationDate\" }\n    ]\n  }),\n\n  components: {\n    TextView,\n    ImageView\n  },\n\n  computed: {\n    path() {\n      return \"../\" + this.$store.getters.getFilesPath;\n    },\n    filesInfo() {\n      return this.$store.getters.getFilesInfo;\n    }\n  },\n\n  watch: {},\n\n  created() {\n    this.$store.dispatch(\"GetFilesPath\");\n    this.$store.dispatch(\"GetFilesInfo\");\n  },\n\n  methods: {\n    uploadFiles() {\n      this.$refs.file.click();\n    },\n    async submitFile() {\n      this.progress = true;\n      this.file = this.$refs.file.files[0];\n      let formData = new FormData();\n      formData.append(\"file\", this.file);\n\n      await this.$store.dispatch(\"UploadFile\", formData);\n      this.progress = false;\n    },\n    deleted(item) {\n      this.dialog = true;\n      this.selectedItem = item;\n    },\n    async deletItem(item) {\n      this.deleting = true;\n      await this.$store.dispatch(\"DeleteFile\", this.selectedItem.Path);\n      await this.$store.dispatch(\"GetFilesInfo\");\n      this.deleting = false;\n      this.dialog = false;\n    },\n    view(item) {\n      switch (item.TypeFiles) {\n        case 0:\n          this.$store.dispatch(\"SetViewImag\", true);\n          break;\n        case 1:\n          this.$store.dispatch(\"SetViewText\", true);\n          break;\n        case 2:\n          alert(\"No\");\n          break;\n      }\n      this.$store.dispatch(\"SetFileInfo\", item);\n    }\n  }\n};\n",{"version":3,"sources":["FileManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileManager.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-card-title>\n      <v-toolbar-title>Файлы в папке {{path}}</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-text-field\n        v-model=\"search\"\n        append-icon=\"search\"\n        label=\"Поиск\"\n        single-line\n        hide-details\n        color=\"cyan darken-3\"\n      ></v-text-field>\n    </v-card-title>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"filesInfo\"\n      :search=\"search\"\n      :loading=\"progress\"\n      rows-per-page-text=\"Строк на странице\"\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td>{{ props.item.Names }}</td>\n        <td class=\"text-xs-left\">{{ props.item.Size }} Mb</td>\n        <td class=\"text-xs-left\">{{ props.item.ModificationDate }}</td>\n        <td>\n          <v-tooltip bottom v-if=\"props.item.TypeFiles !== 2\">\n            <v-btn  slot=\"activator\" color=\"blue darken-1\" dark fab small @click=\"view(props.item)\">\n              <v-icon>description</v-icon>\n            </v-btn>\n            <span>Просмотр</span>\n          </v-tooltip>\n          <v-tooltip bottom>\n            <v-btn\n              slot=\"activator\"\n              color=\"red\"\n              dark\n              fab\n              small\n              @click=\"deleted(props.item)\"\n            >\n              <v-icon>delete_forever</v-icon>\n            </v-btn>\n            <span>Удалить файл</span>\n          </v-tooltip>\n        </td>\n      </template>\n      <v-alert\n        slot=\"no-results\"\n        :value=\"true\"\n        color=\"error\"\n        icon=\"warning\"\n      >По вашему запросу \"{{ search }}\" ни чего не найдено.</v-alert>\n    </v-data-table>\n    <v-btn color=\"info\" @click=\"uploadFiles\" :loading=\"progress\">Добавить файл</v-btn>\n    <input style=\"display: none\" type=\"file\" id=\"file\" ref=\"file\" v-on:change=\"submitFile()\">\n    <TextView></TextView>\n    <ImageView></ImageView>\n\n    <v-layout row justify-center>\n      <v-dialog v-model=\"dialog\" persistent max-width=\"400\">\n        <v-card>\n          <v-card-title class=\"headline\">Вы хотите удалить {{selectedItem.Names}}?</v-card-title>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" flat @click=\"dialog = false\">Отмена</v-btn>\n            <v-btn color=\"red darken-1\" :loading=\"deleting\" flat @click=\"deletItem\">Подтвердить</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-layout>\n  </div>\n</template>\n<script>\nimport TextView from \"@/components/TextView\";\nimport ImageView from \"@/components/ImageView\";\n\nexport default {\n  data: () => ({\n    dialog: false,\n    search: \"\",\n    progress: false,\n    deleting: false,\n    selectedItem: '',\n    headers: [\n      { text: \"Имя файла\", value: \"Names\" },\n      { text: \"Размер\", value: \"Size\" },\n      { text: \"Дата модификации\", value: \"ModificationDate\" }\n    ]\n  }),\n\n  components: {\n    TextView,\n    ImageView\n  },\n\n  computed: {\n    path() {\n      return \"../\" + this.$store.getters.getFilesPath;\n    },\n    filesInfo() {\n      return this.$store.getters.getFilesInfo;\n    }\n  },\n\n  watch: {},\n\n  created() {\n    this.$store.dispatch(\"GetFilesPath\");\n    this.$store.dispatch(\"GetFilesInfo\");\n  },\n\n  methods: {\n    uploadFiles() {\n      this.$refs.file.click();\n    },\n    async submitFile() {\n      this.progress = true;\n      this.file = this.$refs.file.files[0];\n      let formData = new FormData();\n      formData.append(\"file\", this.file);\n\n      await this.$store.dispatch(\"UploadFile\", formData);\n      this.progress = false;\n    },\n    deleted(item) {\n      this.dialog = true;\n      this.selectedItem = item;\n    },\n    async deletItem(item) {\n      this.deleting = true;\n      await this.$store.dispatch(\"DeleteFile\", this.selectedItem.Path);\n      await this.$store.dispatch(\"GetFilesInfo\");\n      this.deleting = false;\n      this.dialog = false;\n    },\n    view(item) {\n      switch (item.TypeFiles) {\n        case 0:\n          this.$store.dispatch(\"SetViewImag\", true);\n          break;\n        case 1:\n          this.$store.dispatch(\"SetViewText\", true);\n          break;\n        case 2:\n          alert(\"No\");\n          break;\n      }\n      this.$store.dispatch(\"SetFileInfo\", item);\n    }\n  }\n};\n</script>"]}]}